[gd_scene load_steps=20 format=2]

[ext_resource path="res://assets/circle.png" type="Texture" id=1]
[ext_resource path="res://entities/player/Player.gd" type="Script" id=2]
[ext_resource path="res://assets/square.png" type="Texture" id=3]
[ext_resource path="res://scripts/state_machine.gd" type="Script" id=4]
[ext_resource path="res://entities/player/jump_state.gd" type="Script" id=5]
[ext_resource path="res://entities/player/walk_state.gd" type="Script" id=6]
[ext_resource path="res://idle_state.gd" type="Script" id=7]
[ext_resource path="res://Tail.gd" type="Script" id=8]
[ext_resource path="res://debug_rewind.gd" type="Script" id=9]
[ext_resource path="res://entities/player/player_rewinder.gd" type="Script" id=10]
[ext_resource path="res://scripts/rigid_body_rewinder.gd" type="Script" id=11]

[sub_resource type="StreamTexture" id=1]
flags = 4
load_path = "res://.import/circle.png-6efbe600b7e2418cd5091089237d13c1.stex"

[sub_resource type="CircleShape2D" id=2]
radius = 22.608

[sub_resource type="RectangleShape2D" id=3]
extents = Vector2( 599.948, 10 )

[sub_resource type="RectangleShape2D" id=4]
extents = Vector2( 117.054, 10 )

[sub_resource type="RectangleShape2D" id=5]
extents = Vector2( 117.054, 10 )

[sub_resource type="PhysicsMaterial" id=6]
bounce = 0.02

[sub_resource type="CircleShape2D" id=7]
radius = 22.6082

[sub_resource type="RectangleShape2D" id=8]
extents = Vector2( 22.5885, 22.4481 )

[node name="Main" type="Node2D"]

[node name="DebugData" type="Control" parent="."]
margin_left = 0.51886
margin_right = 1024.52
margin_bottom = 600.0
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Rewind" type="VBoxContainer" parent="DebugData"]
anchor_top = 0.019
anchor_bottom = 0.076
margin_left = 17.0
margin_top = 20.0
margin_right = 40.0
script = ExtResource( 9 )
__meta__ = {
"_edit_use_anchors_": false
}
player_node = NodePath("../../Ball")

[node name="FinalPosition" type="Label" parent="DebugData/Rewind"]
margin_right = 138.0
margin_bottom = 14.0
text = "LAST_POS: (100, 100)"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="FinalVelocity" type="Label" parent="DebugData/Rewind"]
margin_top = 18.0
margin_right = 138.0
margin_bottom = 32.0
text = "FINAL_VEL: (155, 23)"

[node name="CurrentPosition" type="Label" parent="DebugData/Rewind"]
margin_top = 36.0
margin_right = 138.0
margin_bottom = 50.0
text = "CURR_POS: (100, 100)"

[node name="CurrentVelocity" type="Label" parent="DebugData/Rewind"]
margin_top = 54.0
margin_right = 138.0
margin_bottom = 68.0
text = "CURR_VEL: (155,24)"
__meta__ = {
"_edit_use_anchors_": false
}

[node name="Tail" type="Sprite" parent="."]
visible = false
modulate = Color( 0.0392157, 0.647059, 0.807843, 1 )
position = Vector2( 267.501, 544.065 )
scale = Vector2( 0.3, 0.3 )
texture = SubResource( 1 )
script = ExtResource( 8 )
rewinder_node = NodePath("../Player/Rewinder")

[node name="Player" type="KinematicBody2D" parent="."]
position = Vector2( 341.908, 547.845 )
script = ExtResource( 2 )
__meta__ = {
"_edit_group_": true
}
gravity = Vector2( 0, 1400 )
jump_force = 800.0

[node name="Rewinder" type="Node" parent="Player"]
script = ExtResource( 10 )

[node name="StateMachine" type="Node" parent="Player"]
script = ExtResource( 4 )
initial_state = NodePath("IdleState")

[node name="JumpState" type="Node" parent="Player/StateMachine"]
script = ExtResource( 5 )

[node name="WalkState" type="Node" parent="Player/StateMachine"]
script = ExtResource( 6 )

[node name="IdleState" type="Node" parent="Player/StateMachine"]
script = ExtResource( 7 )

[node name="Sprite" type="Sprite" parent="Player"]
modulate = Color( 0.898039, 0.854902, 0.227451, 1 )
position = Vector2( 1.18921, 0 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 1 )

[node name="Collider" type="CollisionShape2D" parent="Player"]
visible = false
shape = SubResource( 2 )
__meta__ = {
"_edit_lock_": true
}

[node name="Walls" type="Node2D" parent="."]
__meta__ = {
"_edit_lock_": true
}

[node name="Bottom" type="StaticBody2D" parent="Walls"]
position = Vector2( 512, 591.036 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="Walls/Bottom"]
modulate = Color( 0.0392157, 0.0392157, 0.0392157, 1 )
scale = Vector2( 8.005, 0.128 )
texture = ExtResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Collider" type="CollisionShape2D" parent="Walls/Bottom"]
visible = false
shape = SubResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Top" type="StaticBody2D" parent="Walls"]
position = Vector2( 512, -4.31873 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="Walls/Top"]
modulate = Color( 0.0392157, 0.0392157, 0.0392157, 1 )
scale = Vector2( 8.005, 0.128 )
texture = ExtResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Collider" type="CollisionShape2D" parent="Walls/Top"]
visible = false
shape = SubResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Left" type="StaticBody2D" parent="Walls"]
position = Vector2( -12.7194, 591.036 )
rotation = 1.5708
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="Walls/Left"]
modulate = Color( 0.0392157, 0.0392157, 0.0392157, 1 )
scale = Vector2( 8.005, 0.128 )
texture = ExtResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Collider" type="CollisionShape2D" parent="Walls/Left"]
visible = false
shape = SubResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Right" type="StaticBody2D" parent="Walls"]
position = Vector2( 1035.04, 591.036 )
rotation = 1.5708
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="Walls/Right"]
modulate = Color( 0.0392157, 0.0392157, 0.0392157, 1 )
scale = Vector2( 8.005, 0.128 )
texture = ExtResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Collider" type="CollisionShape2D" parent="Walls/Right"]
visible = false
shape = SubResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Platforms" type="Node2D" parent="."]

[node name="Platform" type="StaticBody2D" parent="Platforms"]
position = Vector2( 748.979, 434.238 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="Platforms/Platform"]
modulate = Color( 0.0392157, 0.0392157, 0.0392157, 1 )
scale = Vector2( 1.565, 0.133 )
texture = ExtResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Collider" type="CollisionShape2D" parent="Platforms/Platform"]
visible = false
shape = SubResource( 4 )
__meta__ = {
"_edit_lock_": true
}

[node name="Platform2" type="StaticBody2D" parent="Platforms"]
position = Vector2( 299.966, 302.385 )
__meta__ = {
"_edit_group_": true
}

[node name="Sprite" type="Sprite" parent="Platforms/Platform2"]
modulate = Color( 0.0392157, 0.0392157, 0.0392157, 1 )
scale = Vector2( 1.565, 0.133 )
texture = ExtResource( 3 )
__meta__ = {
"_edit_lock_": true
}

[node name="Collider" type="CollisionShape2D" parent="Platforms/Platform2"]
visible = false
shape = SubResource( 5 )
__meta__ = {
"_edit_lock_": true
}

[node name="Ball" type="RigidBody2D" parent="."]
position = Vector2( 428.275, 367.759 )
mass = 228.85
physics_material_override = SubResource( 6 )
gravity_scale = 10.0
__meta__ = {
"_edit_group_": true
}

[node name="Rewinder" type="Node" parent="Ball"]
script = ExtResource( 11 )

[node name="Sprite" type="Sprite" parent="Ball"]
modulate = Color( 0.47451, 0.0352941, 0.631373, 1 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 1 )
__meta__ = {
"_editor_description_": "	"
}

[node name="Collider" type="CollisionShape2D" parent="Ball"]
shape = SubResource( 7 )

[node name="Block" type="RigidBody2D" parent="."]
position = Vector2( 251.883, 269.06 )
__meta__ = {
"_edit_group_": true
}

[node name="Rewinder" type="Node" parent="Block"]
script = ExtResource( 11 )

[node name="Sprite" type="Sprite" parent="Block"]
modulate = Color( 0.0156863, 0.317647, 0.32549, 1 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Block"]
visible = false
shape = SubResource( 8 )

[node name="Block2" type="RigidBody2D" parent="."]
position = Vector2( 251.883, 225.011 )
__meta__ = {
"_edit_group_": true
}

[node name="Rewinder" type="Node" parent="Block2"]
script = ExtResource( 11 )

[node name="Sprite" type="Sprite" parent="Block2"]
modulate = Color( 0.0156863, 0.317647, 0.32549, 1 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Block2"]
visible = false
shape = SubResource( 8 )

[node name="Block3" type="RigidBody2D" parent="."]
position = Vector2( 251.883, 180.285 )
__meta__ = {
"_edit_group_": true
}

[node name="Rewinder" type="Node" parent="Block3"]
script = ExtResource( 11 )

[node name="Sprite" type="Sprite" parent="Block3"]
modulate = Color( 0.0156863, 0.317647, 0.32549, 1 )
position = Vector2( 0.333679, 0 )
scale = Vector2( 0.3, 0.3 )
texture = ExtResource( 3 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="Block3"]
visible = false
shape = SubResource( 8 )
